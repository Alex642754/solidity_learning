部署的思路：
使用js，将合约的编译编写成一个自动化的脚本，让脚本自动化的完成合约的编译和部署，最后返回这个合约的地址。

创建一个本地的EVM，用来模拟部署过程，测试合约的功能是否正常，他会自动的生成20个账户。指令：npx hardhat node

因为EVM需要持续的运行，所以接着需要再打开一个终端

部署合约的脚本：将合约编译成字节码，然后发送部署交易，等待交易被确认，最后返回合约地址
npx hardhat run scripts/deploy.js --network localhost，这里要加上--network localhost，指定使用本地的EVM网络，不然会默认使用hardhat网络

这里要注意一点npx hardhat run scripts/deploy.js --network localhost在首次使用的 时候会自动的去编译合约，所以如果合约有修改，需要先重新编译，指令：npx hardhat compile

再打开一个终端，
打开一个可以交互到本地EVM的终端，指令：npx hardhat console --network localhost

这样就可以访问控制链上的合约了

之后就是接入链上的合约了，需要在脚本中引入合约的ABI，然后使用合约的地址创建一个合约实例，就可以访问合约的函数了
const SimpleBank = await ethers.getContractFactory("SimpleBank");拿到合约工厂的ABI文件信息，不然后面接入的话根本就不知道里面有什么方法
const bank = await SimpleBank.attach("0x1234...");
接入合约实例
await bank.getAddress()查看当前接入的合约实例
-----------------------------------------------------------------------------

 solidity和js中的require()，作用是不同的
 solidity中是用来检查条件是否满足的
 Node.js的语法，是用来引入模块的
 hardhat环境对象的模块中，装的是可供对象使用的工具
 hre.ethers      // ethers.js 库的接口，用来与区块链交互
hre.network     // 当前网络信息（名称、chainId、RPC URL）
hre.config      // hardhat.config.js 的配置对象
hre.artifacts   // 编译后的合约 ABI、bytecode
hre.run         // 执行 hardhat 内部任务（例如 compile, test）

ethers库的核心功能
ContractFactory：获得合约工厂
我编写的合约在编译会生成两样东西，一个是面向用户的，告诉用户合约的一些功能数据事件信息，另一个是面向EVM的字节码，而ContractFactory则是作为一个对象，去拿到这两部分信息之后在区块链上部署一个合约实例

部署过程：
合约编译后的字节码，会创建一个部署交易，把合约中的相关函数参数给打包进去，然后以交易的形式把他给部署到区块链上，因为是写入的链上，所以会花费gas费，然后EVM会在链上生成一个合约实例，并且返回一个合约实例的对象，里面包含.address、.functions这些属性

.deploy所做的则是打包，等待节点反应这个过程，并不是部署的全部过程，他只完成了部署的发送阶段。
后面需要等待矿工吧交易被打包进一个区块，然后被确认，才算完成了部署过程。所以需要waitForDeployment()来确认部署完成

最后是辅助修饰符，主要作用就是保证交易的金额一定是大于0的，否则就会报错

----------------------------------------------------------
测试：
功能测试，边界测试，安全测试
执行
npx hardhat test
会自动的扫描test文件下带test.js的文件，然后执行里面的测试

语法：
断言库，一种语言风格，检查合约的行为是否符合预期，chai主要负责判断结果对不对
mocha是默认的测试框架，所以无需引入即可使用
mocha相关函数：
describe：把一组相关的测试放在一起
每个it对于一个具体的测试，具体语法结构为：it(测试名称, 测试函数)
在测试的时候hardhat会临时的启动一个本地的区块链环境，并且在测试结束后销毁这个环境，所以测试的第一步是吧合约部署到这个环境中

ethers.getSigners()，因为他会自动的部署20个账户，所以可以直接使用这个方法来获取到这20个账户的对象

SimpleBank.deploy() 创建一个「链上合约实例」并返回一个 JS 操作对象；
simpleBank.connect(owner).deposit({...}) 让这个实例以 owner 的身份执行函数并发交易。

expect期望某个值满足某个条件，如果不满足，就判定测试失败
expect(balance).to.equal(depositAmount);
期望用户余额的值等于存入金额（depositAmount）如果等于则测试通过

------------------------------------------
命令行测试：
npx hardhat test 执行test文件下所有后缀为.test.js的文件
npx hardhat test --grep "deposit" 执行test文件下所有后缀为.test.js的文件中，包含deposit的测试
npx hardhat test test/SimpleBank.test.js 执行test文件下的SimpleBank.test.js文件

整体思路：
先部署合约，然后再测试合约的功能
